#!/usr/bin/env node

const release = require('gh-release');

// all options have defaults and can be omitted
var options = {
  tag_name: process.env.CIRCLE_TAG,
  name: process.env.CIRCLE_TAG,
  body: 'release ' + process.env.CIRCLE_TAG + '\n',
  draft: false,
  prerelease: false,
  assets: 'extension.zip',
  repo: process.env.CIRCLE_PROJECT_REPONAME,
  owner: process.env.CIRCLE_PROJECT_USERNAME
};

// GitHub API token
options.auth = {
  token: process.env.GITHUB_DEPLOY_PRIVATE_KEY
};

release(options, function(err, result) {
  if (err) throw err;
  console.log(result);
});
